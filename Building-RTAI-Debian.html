<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BUILDING RTAI KERNEL, REALTIME and MACHINEKIT on DEBIAN 7 (Wheezy)</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_building_rtai_kernel_realtime_and_machinekit_on_debian_7_wheezy">BUILDING RTAI KERNEL, REALTIME and MACHINEKIT on DEBIAN 7 (Wheezy)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide is for those who wish to experiment with their own kernel
and realtime builds</p>
</div>
<div class="paragraph">
<p>The config has been tested sucessfully on D525 Intel Atom, Intel P4,
Intel Celeron B630 and Intel core i2</p>
</div>
<div class="paragraph">
<p>It does not however run Machinekit on a new Intel core i7,
albeit the kernel runs and everything builds, so it may not be suitable
for some newer Sandy Bridge chipset and later based boards</p>
</div>
<div class="literalblock">
<div class="content">
<pre>************************</pre>
</div>
</div>
<div class="paragraph">
<p>There is no need to do this to get a realtime kernel that works on Debian</p>
</div>
<div class="paragraph">
<p>Simply go to <a href="http://highlab.com/~seb/linuxcnc/rtai-for-3.4-prerelease/">http://highlab.com/~seb/linuxcnc/rtai-for-3.4-prerelease/</a></p>
</div>
<div class="paragraph">
<p>Download</p>
</div>
<div class="paragraph">
<p><strong>linux-headers-3.4.55-rtai-2_3_i386.deb</strong></p>
</div>
<div class="paragraph">
<p><strong>linux-image-3.4.55-rtai-2_3_i386.deb</strong></p>
</div>
<div class="paragraph">
<p><strong>rtai-modules-3.4.55-rtai-2_3.9-shabby-memleak-2013.12.13_i386.deb</strong></p>
</div>
<div class="paragraph">
<p>Install them with <strong>dpkg -i &lt;debname&gt;</strong></p>
</div>
<div class="paragraph">
<p>Run <strong>update-grub</strong> and re-boot into the kernel and build MachineKit
(instructions below if required)</p>
</div>
<div class="paragraph">
<p>I have tested this and it works fine</p>
</div>
<div class="paragraph">
<p>The only isssue is that you need to sort out some symlinks</p>
</div>
<div class="paragraph">
<p>Install the headers first and then make a symlink to them in <strong>/usr/src</strong> called <strong>linux</strong></p>
</div>
<div class="paragraph">
<p>Install the kernel image and you will see errors from postinst regards the modules
symlinks</p>
</div>
<div class="paragraph">
<p>Create two symlinks from <strong>/usr/src/linux</strong> to <strong>/lib/modules/3.4.55-rtai-2/build</strong> and <strong>/lib/modules/3.4.55-rtai-2/source</strong></p>
</div>
<div class="paragraph">
<p>Now install realtime</p>
</div>
<div class="paragraph">
<p>Now the path in /realtime-xxxxx/bin/rtai-config for the linux sources will be correct</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t do this the MachineKit build will fail to build any rtai modules and fail when run</p>
</div>
<div class="literalblock">
<div class="content">
<pre>***************************</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Installing Debian 7 and readying it for Building on i386 PC&#8217;s</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>The best source for an installation is the debian net install CD image</p>
</div>
<div class="paragraph">
<p>It is small (approx 280MB) and because the bulk of files are downloaded
from the net, the initial installation is always completely up to date.</p>
</div>
<div class="paragraph">
<p><strong><a href="http://cdimage.debian.org/debian-cd/">http://cdimage.debian.org/debian-cd/</a></strong></p>
</div>
<div class="paragraph">
<p>Then choose whatever the current version of 7 is (currently 7.5)</p>
</div>
<div class="listingblock">
<div class="title">Install type</div>
<div class="content">
<pre>There are many options available, you can choose text or graphical install
and from there which window manager etc

LXDM is a good choice for a light install

Choose a kernel type to suit your machine, unless it is an old machine the
686-pae kernel is a safe choice</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Post Install</div>
<div class="content">
<pre>Various things need to be done to ready your system for realtime operation
and building.</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Getting root and sudo access</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>The Debian install process has a nasty habit of allowing you to create a
root account and set a password during install, but when you boot the install
you cannot access root and sudo does not work</p>
</div>
<div class="paragraph">
<p>This often seems to result from allowing the installer to set time from
internet and when you come to complete the install it hangs half way trying to
resolve the time and never creates the root account properly.
I don&#8217;t let it set the time like this and just choose time zone and adjust for
summertime etc myself later.</p>
</div>
<div class="paragraph">
<p>If this affects you, the below will enable you to get root a	rtai-modules-3.4.55-rtai-2_3.9-shabby-memleak-2013.12.13_i386.debccess and sudo as a user.</p>
</div>
<div class="paragraph">
<p>This assumes you chose GRUB 2 as the boot manager.  If you chose Lilo - good luck</p>
</div>
<div class="paragraph">
<p>Reboot and interrupt the grub boot, (hold down ESC if you never see it to get it up,
you may need to use a PS2 keyboard with older BIOS)
and press <em>e</em> on the boot line</p>
</div>
<div class="paragraph">
<p>Go to the kernel boot line and change the end bit from <em>ro quiet splash</em> to <em>ro single</em>
Then press F10 to boot or Esc will take you back to the menu without change if you think
you have fouled up and want to start again.</p>
</div>
<div class="paragraph">
<p>That will get you a root shell</p>
</div>
<div class="paragraph">
<p><strong>passwd root</strong></p>
</div>
<div class="paragraph">
<p>Enter new password twice</p>
</div>
<div class="paragraph">
<p><strong>passwd -u root</strong></p>
</div>
<div class="paragraph">
<p>then reboot</p>
</div>
<div class="paragraph">
<p>From the root terminal (Accessories &gt; Root Terminal if using LXDM)</p>
</div>
<div class="paragraph">
<p><strong>apt-get install gedit</strong>  (does not get installed by default)</p>
</div>
<div class="paragraph">
<p><strong>gedit /etc/sudoers</strong></p>
</div>
<div class="paragraph">
<p>Beneath entry for root enter</p>
</div>
<div class="paragraph">
<p><strong>dave    ALL=(ALL:ALL) ALL</strong>
(assuming your user is dave)</p>
</div>
<div class="paragraph">
<p>Save and close the terminal</p>
</div>
<div class="paragraph">
<p>Open another one and you should be able to sudo</p>
</div>
<div class="listingblock">
<div class="title">Fetch build packages</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>First fetch the following using apt from a terminal
(This will take some considerable time)</p>
</div>
<div class="paragraph">
<p><strong>sudo apt-get install build-essential debhelper libpth-dev libgtk2.0-dev tcl8.5-dev tk8.5-dev</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo apt-get install bwidget python-old-doctools python-tk python-dev libglu1-mesa-dev libgtk2.0-dev libgnomeprintui2.2-dev</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo apt-get install libncurses5-dev libxaw7-dev gettext libreadline-gplv2-dev lyx texlive-extra-utils imagemagick texinfo groff libmodbus-dev</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo apt-get install libudev-dev libmodbus-dev libboost-python-dev libboost-serialization-dev libboost-thread-dev</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo apt-get install libtk-img automake autoconf libtool libusb-0.1-4 libusb-1.0.0-dev git</strong></p>
</div>
<div class="paragraph">
<p>This list is not exhaustive but correct at the time of writing.
It is possible that extra packages will be required in the future or that package numbers will change.
You will be prompted during the configure process of building MachineKit if any more are required.</p>
</div>
<div class="paragraph">
<p>Sometimes it will not be until you come to run MachineKit that extra python requirements will
become known, but that is the nature of a run-time language.</p>
</div>
<div class="listingblock">
<div class="title">Fetching the sources for kernel and realtime</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>In the root terminal run</p>
</div>
<div class="paragraph">
<p><strong>cd /usr/src</strong></p>
</div>
<div class="paragraph">
<p><strong>git clone <a href="https://github.com/arceye/3.5.7-rtai-debian.git">https://github.com/arceye/3.5.7-rtai-debian.git</a> sources</strong></p>
</div>
<div class="listingblock">
<div class="title">Building the kernel</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>When finished cloning</p>
</div>
<div class="paragraph">
<p><strong>cp -R sources/RTAI RTAI</strong></p>
</div>
<div class="paragraph">
<p><strong>cp -R sources/linux-3.5.7 linux-3.5.7</strong></p>
</div>
<div class="paragraph">
<p><strong>ln -s linux-3.5.7 linux</strong></p>
</div>
<div class="paragraph">
<p><strong>cd linux</strong></p>
</div>
<div class="paragraph">
<p><strong>patch -p1 &lt; ../sources/hal-linux-3.5.7-x86-3.patch</strong></p>
</div>
<div class="paragraph">
<p>For a SMP (multi processor) build</p>
</div>
<div class="paragraph">
<p><strong>cp ../sources/3.5.7-rtai-smp-config .config</strong></p>
</div>
<div class="paragraph">
<p>Or for a UP (single processor) build</p>
</div>
<div class="paragraph">
<p><strong>cp ../sources/3.5.7-rtai-up-config .config</strong></p>
</div>
<div class="paragraph">
<p><strong>touch .config</strong></p>
</div>
<div class="paragraph">
<p>At this point you could make changes to the config with <strong>make menuconfig</strong></p>
</div>
<div class="paragraph">
<p>Do so at your own risk, setting the correct number of cores is probably the most you want to do
if it is more than 4 (SMP config only)</p>
</div>
<div class="paragraph">
<p>If you start changing the processor instruction set or turning back on ACPI functions in particular
you could end up with a kernel that does not run at all, or does not run realtime apps.</p>
</div>
<div class="paragraph">
<p>To turn on the production of a driver module you require for your machine, it is often easier to
search the config file in an editor</p>
</div>
<div class="paragraph">
<p><strong>DRIVER_NAME=y</strong>  means it will be built into the kernel</p>
</div>
<div class="paragraph">
<p><strong>DRIVER_NAME=m</strong>  means it will be built as a module</p>
</div>
<div class="paragraph">
<p>Now build the kernel</p>
</div>
<div class="paragraph">
<p><strong>make -jX</strong>  (where X is the number of cores + 1 on a multi-core machine, or just)</p>
</div>
<div class="paragraph">
<p><strong>make</strong> (on a UP machine)</p>
</div>
<div class="paragraph">
<p>When finished (may take a long time)</p>
</div>
<div class="paragraph">
<p><strong>make modules_install</strong></p>
</div>
<div class="paragraph">
<p><strong>cp System.map /boot/System.map-3.5.7-rtai</strong></p>
</div>
<div class="paragraph">
<p><strong>cp .config /boot/config-3.5.7-rtai</strong></p>
</div>
<div class="paragraph">
<p><strong>cp arch/x86/boot/bzImage /boot/vmlinuz-3.5.7-rtai</strong></p>
</div>
<div class="paragraph">
<p><strong>cd /boot</strong></p>
</div>
<div class="paragraph">
<p><strong>update-initramfs -c -k 3.5.7-rtai</strong></p>
</div>
<div class="paragraph">
<p><strong>update-grub</strong></p>
</div>
<div class="listingblock">
<div class="title">Rebooting to the 3.5.7-rtai kernel</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>You are then ready to reboot and select the 3.5.7-rtai kernel from the GRUB menu.</p>
</div>
<div class="listingblock">
<div class="title">Building Realtime</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>Open a root terminal</p>
</div>
<div class="paragraph">
<p><strong>cd /usr/src/RTAI</strong></p>
</div>
<div class="paragraph">
<p><strong>./autogen.sh</strong></p>
</div>
<div class="paragraph">
<p>configure will run, but now you need to edit the default RTAI configuration</p>
</div>
<div class="paragraph">
<p><strong>make menuconfig</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>From here you need to go to Base System &gt; Other features  [Enter] and select
    (Y) Mathfuns support in Kernel
    (Y) C99 standard support</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>You must configure RTAI for your specific number of processing cores</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>To find out how many cores your CPU has, run:
cat /proc/cpuinfo | grep processor | wc -l
in another terminal</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Then got Machine &gt; Number of CPUs, [Enter] and replace figure with your number</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Finally press &lt;Exit&gt; until out of menuconfig and say &lt;Yes&gt; to save config</pre>
</div>
</div>
<div class="paragraph">
<p>Now configure will run again automatically</p>
</div>
<div class="paragraph">
<p><strong>make &amp;&amp; make install</strong></p>
</div>
<div class="paragraph">
<p>When finished, that is realtime installed</p>
</div>
<div class="listingblock">
<div class="title">Create and Edit config files for realtime / machinekit</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>From a terminal</p>
</div>
<div class="paragraph">
<p><strong>sudo touch /etc/udev/rules.d/50-LINUXCNC-shmdrv.rules</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo gedit /etc/udev/rules.d/50-LINUXCNC-shmdrv.rules</strong></p>
</div>
<div class="paragraph">
<p>make this entry</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="bash language-bash"># make the shared memory allocator publically accessible
KERNEL=="shmdrv", MODE="0666"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>sudo touch /etc/udev/rules.d/99-rtai.rules</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo gedit /etc/udev/rules.d/99-rtai.rules</strong></p>
</div>
<div class="paragraph">
<p>make these entries</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="bash language-bash"># RTAI:rtai_shm
KERNEL=="rtai_shm", MODE="0666"

# RTAI:rtai_fifos
KERNEL=="rtf[0-9]*", MODE="0666"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>sudo touch /etc/security/limits.d/linuxcnc.conf</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo gedit /etc/security/limits.d/linuxcnc.conf</strong></p>
</div>
<div class="paragraph">
<p>make these entries</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="bash language-bash">* soft memlock 30000000
* hard memlock 30000000</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Clone MachineKit</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>In a root terminal</p>
</div>
<div class="paragraph">
<p><strong>cd /usr/src</strong></p>
</div>
<div class="paragraph">
<p><strong>git clone <a href="https://github.com/machinekit/machinekit.git">https://github.com/machinekit/machinekit.git</a> machinekit</strong></p>
</div>
<div class="paragraph">
<p>When complete</p>
</div>
<div class="paragraph">
<p><strong>chown -R yourusername:yourusername ./machinekit</strong></p>
</div>
<div class="paragraph">
<p>Then close the root terminal and open a normal one</p>
</div>
<div class="listingblock">
<div class="title">After cloning MachineKit and before building</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>MachineKit uses rsyslog to log errors, making debugging in case of problems much easier.
This needs to be enabled, if you do not do so you will get an error at the end of the build.</p>
</div>
<div class="paragraph">
<p><strong>sudo touch /var/log/linuxcnc.log</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo chmod 644 /var/log/linuxcnc.log</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo cp /usr/src/macinekit/src/rtapi/rsyslogd-linuxcnc.conf /etc/rsyslog.d/linuxcnc.conf</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo chmod 644 /etc/rsyslog.d/linuxcnc.conf</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo /etc/init.d/rsyslog restart</strong></p>
</div>
<div class="listingblock">
<div class="title">Building MachineKit</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>The later kernel based distros, Debian 7 and Ubuntu 12.04 included, changed the set up inside /usr/include</p>
</div>
<div class="paragraph">
<p>This will prevent Machinekit building unless you make a few changes</p>
</div>
<div class="paragraph">
<p>From a file manager go to /usr/include/i386-linux-gnu</p>
</div>
<div class="paragraph">
<p>Now copy all the folders and loose header back to the root dir
ie.</p>
</div>
<div class="paragraph">
<p><strong>/asm /bits /gnu /sys a.out.h fpu_control.h ieee754.h</strong></p>
</div>
<div class="paragraph">
<p>Now we are ready to build</p>
</div>
<div class="paragraph">
<p><strong>cd /usr/src/machinekit/src</strong></p>
</div>
<div class="paragraph">
<p><strong>./autogen.sh</strong></p>
</div>
<div class="paragraph">
<p><strong>./configure</strong></p>
</div>
<div class="paragraph">
<p>Now scroll back and read the output to screen</p>
</div>
<div class="paragraph">
<p>It should contain these lines</p>
</div>
<div class="literalblock">
<div class="content">
<pre>checking for configured kernel source in /usr/src/linux-3.5.7... found
checking if /usr/src/linux-3.5.7 is a xenomai kernel... no
checking if /usr/src/linux-3.5.7 is an RTAI kernel... yes
checking -lrt for RT_PREEMPT and POSIX... ok
checking whether to build POSIX threads... yes
checking whether to build RT_PREEMPT threads... yes
checking for xeno-config... no
checking usability of xenomai utility, 0... no
checking whether to build Xenomai userland threads... no
checking whether to build Xenomai kernel threads... no
checking for rtai-config... /usr/realtime/bin/rtai-config
checking usability of RTAI utility, /usr/realtime/bin/rtai-config... yes
checking whether to build RTAI threads... yes
checking whether to build hardware drivers... yes</pre>
</div>
</div>
<div class="paragraph">
<p>That shows the rtai kernel is detected, the realtime config points to the right place and RTAI threads will be built</p>
</div>
<div class="paragraph">
<p>Now the final build commands</p>
</div>
<div class="paragraph">
<p><strong>make</strong></p>
</div>
<div class="paragraph">
<p><strong>sudo make setuid &amp;&amp; cd ../ &amp;&amp; . ./scripts/rip-environment</strong></p>
</div>
<div class="paragraph">
<p>It&#8217;s not called machinekit yet, so</p>
</div>
<div class="paragraph">
<p><strong>linuxcnc</strong></p>
</div>
<div class="paragraph">
<p>and you are away!</p>
</div>
<div class="listingblock">
<div class="title">Additional Notes</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Realtek RTL8111/RTL8168 ethernet</div>
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>Some versions of this chip can cause huge problems when used with the r8169 module which is supplied with the 3.5.7 kernel</p>
</div>
<div class="paragraph">
<p>If ethernet works at all it, it is either hugely degraded in speed or intermitant and the kernel may be unstable</p>
</div>
<div class="paragraph">
<p>If you have this chipset it will show up with</p>
</div>
<div class="paragraph">
<p><strong>lspci -vv | more</strong></p>
</div>
<div class="paragraph">
<p>Page through the output looking for <em>Ethernet Controller: Realtek &#8230;.</em></p>
</div>
<div class="paragraph">
<p>At the bottom of the entry is</p>
</div>
<div class="paragraph">
<p>Kernel Driver in use:   xxxxx</p>
</div>
<div class="paragraph">
<p>If the driver is listed as r8169, you need to replace it with the r8168 driver</p>
</div>
<div class="paragraph">
<p>There is a directory called r8168-8.035.00 in the cloned git repo you made at /usr/src/sources</p>
</div>
<div class="paragraph">
<p>That contains a README file with instructions to build the driver, blacklist r8169 and insert the module and log it with depmod</p>
</div>
<div class="paragraph">
<p>It is vitally important that you must now re-run the ramfs image creating program to include the module</p>
</div>
<div class="paragraph">
<p><strong>sudo update-initramfs -t -c -k 3.5.7-rtai</strong></p>
</div>
<div class="paragraph">
<p>and then re-boot into the 3.5.7-rtai kernel before anything will take effect</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Author:    ArcEye
Email:     &lt;<a href="mailto:ArcEye@mgware.co.uk">ArcEye@mgware.co.uk</a>&gt;
Date:      12042014
Revision:  0.1</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-04-30 16:12:31 BST
</div>
</div>
</body>
</html>